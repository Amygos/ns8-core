{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "get-cluster-status output",
  "$id": "http://schema.nethserver.org/cluster/get-cluster-status-output.json",
  "description": "Output schema of the get-cluster-status action",
  "examples": [
    {
      "initialized": true,
      "leader": true,
      "nodes": [
        {
          "id": 2,
          "ui_name": "",
          "local": false,
          "online": true,
          "hostname": "node2.invalid",
          "vpn": {
            "ip_address": "10.5.4.2",
            "listen_port": 55820,
            "public_key": "fyp4Bx4glpHZ2rkUhSpBfF+ro6wiykZBzI3TIHpIAU4=",
            "endpoint": "165.22.72.164",
            "last_seen": 1710172253,
            "rcvd": 27660,
            "sent": 7388,
            "keepalive": 25
          }
        },
        {
          "id": 1,
          "ui_name": "",
          "local": true,
          "online": true,
          "hostname": "node1.invalid",
          "vpn": {
            "ip_address": "10.5.4.1",
            "listen_port": 55820,
            "public_key": "6rT/LnB+OIZ25FALQO9YGPA+u+5HIirWCsCFPn609VI=",
            "endpoint": ""
          }
        }
      ],
      "leader_url": "https://rl1.dp.nethserver.net/cluster-admin/",
      "default_password": true,
      "ui_name": "NethServer 8",
      "release_name": "8.1"
    }
  ],
  "type": "object",
  "properties": {
    "release_name": {
      "title": "Name of the NethServer release",
      "description": "Human-readable value provided by the core component. It is different from the core version tag.",
      "type": "string"
    },
    "initialized": {
      "description": "Set to true if the node has been configured, false otherwise",
      "type": "boolean"
    },
    "ui_name": {
      "title": "Display name",
      "type": "string"
    },
    "leader": {
      "description": "Set to true if the running node is the leader, false otherwise",
      "type": "boolean"
    },
    "leader_url": {
      "description": "UI URL of leader node",
      "type": "string"
    },
    "default_password": {
      "description": "Set to true if the admin user has still the default passwsord, false otherwise",
      "type": "boolean"
    },
    "nodes": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "description": "Node ID",
            "type": "integer"
          },
          "ui_name": {
            "title": "Display name",
            "type": "string"
          },
          "local": {
            "description": "Set to true if the action is running on the listed node. ",
            "type": "boolean"
          },
          "hostname": {
            "title": "Machine fully qualified hostname",
            "type": "string"
          },
          "machine_id": {
            "title": "Machine id from /etc/machine.id",
            "type": "string"
          },
          "vpn": {
            "description": "WireGuard VPN details",
            "type": "object",
            "properties": {
              "ip_address": {
                "description": "VPN node IP",
                "type": "string"
              },
              "public_key": {
                "description": "WireGuard VPN publick key",
                "type": "string"
              },
              "endpoint": {
                "description": "WireGuard VPN endpoint",
                "type": "string"
              },
              "lastseen": {
                "description": "Timestamp of last peer hanshake",
                "type": "integer"
              },
              "sent": {
                "description": "Bytes sent to the peer",
                "type": "integer"
              },
              "rcvd": {
                "description": "Bytes received from the peer",
                "type": "integer"
              },
              "keepalive": {
                "description": "Seconds of persistent keepalive",
                "type": "integer"
              }
            },
            "required": [
              "ip_address",
              "public_key"
            ]
          }
        },
        "required": [
          "online",
          "id",
          "ui_name",
          "local",
          "vpn"
        ]
      }
    }
  },
  "required": [
    "initialized",
    "ui_name",
    "nodes",
    "leader",
    "leader_url",
    "default_password"
  ]
}
